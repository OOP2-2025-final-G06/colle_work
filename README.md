# colle_work
バイトのシフト登録のよる給与見込み額でゲームをできるアプリ
----
## メンバー
| 学籍番号      | 氏名     | 役職     |
| -------------- | -------------- | -------------- | 
| k24131　|　前村幸輝　| リーダー, 来週のシフト登録(主担当)　|
| k24086 |  髙田凪緒　|　来週のシフト登録(副担当)　|
| k24012 | 石黒将暉 |　集めたトークンで遊ぶゲームの作成　|
| k24026 | 内田空良 | ユーザーの管理, 画面のCSSの作成　|
| k24074 | 塩野純平 |　時給の計算, トークンの変換　|

#  アプリ概要
「COLLE_WORK」は、アルバイトの**シフト管理・給料計算機能**と、労働対価として得られる報酬（トークン）を用いた**RPG風ミニゲーム**を融合させたWebアプリケーションです。
日々の勤怠入力をゲームの進行（キャラクターの強化）と結びつけることで、継続的な利用を促すゲーミフィケーション要素を取り入れています



# 仕様書（利用者側）
## 1. 動作に必要な条件と実行方法
```text
> 必要な条件
pip install flask（flaskのインストール）

Python 3.10 以上
　実行手順

python app.py


・pythonライブラリー

Flask==3.0.3
sqlite3
datetime
json
```

## 2. 使い方: usage ※ここをもっと追加したほうがいいかも

### (1) ログイン・新規登録
- 既にアカウントを持っている場合はログイン、まだの場合は新規登録が必要です。
- ここで登録したアカウントがユーザーリストの方に反映されます。

### (2) トップ画面
- トップ画面では、ユーザーの一覧を見ることができる「ユーザーリスト」、集めたトークンで遊ぶ「ゲーム」、時給を変更ができる「時給登録」、来週のシフトを登録する「シフト登録」ボタンがあります。
- また、ログインしたユーザーの今週と来週のシフトを見ることができます。

## 3. 各ページのGIFか写真で使い方説明
>ログイン・新規ユーザー登録
![]
>ユーザーリスト
![]
>シフト登録
![]
>ゲーム
![]
>時給登録
![]

## 4. アピールポイント
このアプリがどんな人に使ってもらいたいか、どんな人が使いたいと思うかを書いて欲しいです！！

## 5. アクセスするURL
"http://localhost:8080"



# COLLE_WORK アプリケーション仕様書（技術者側）

## 1. 機能一覧
### (1) シフト・勤怠管理
* **週間シフト登録**: 1週間ごとの希望シフト時間を、ドラッグ不要の直感的なUIで登録。
* **カレンダー表示**: トップ画面にて「今週」と「来週」のシフトを表形式で確認。
* **全体シフト共有**: 他のユーザーのシフト状況をリスト形式で閲覧可能。

### (2) 給与管理 (Wage Manager)
* **時給設定**: ユーザーごとに独自の時給を設定・保存（データベース管理）。
* **自動計算**: 登録されたシフト時間に基づき、以下の項目をリアルタイムで集計・表示。
    * 現在の時給
    * 今月の給料（実績）
    * 今年の年収（実績）

### (3) ゲーム連携 
* **トークンシステム**: 労働時間（シフト登録）に応じて、ゲーム内通貨「トークン」を自動付与。
    * レート: `TOKEN_PER_HOUR`（デフォルト: 時給×10倍相当など設定可）
* **RPGバトル**: Canvas APIを用いた戦闘画面。
    * 攻撃アクション（通常攻撃 / 強攻撃）
    * ステータス強化（攻撃力UP / 会心率UP）
    * オートバトルモード
* **ダブルアップ機能**: 敵撃破時の報酬を賭けた「High & Low」ミニゲーム。

### (4) ユーザー管理
* **認証**: ユーザー名・パスワードによる新規登録およびログイン。
* **セッション**: Flask Sessionを用いたログイン状態の維持。

---

## 3. システム構成・技術スタック

* **言語**: Python 3.x
* **フレームワーク**: Flask
* **データベース**: SQLite3
* **フロントエンド**: HTML5, CSS3, JavaScript (Canvas API)

---

## 4. データベース設計 (Schema)

本システムでは、用途に合わせて2つのSQLiteデータベースファイルを使用します。

### ① `database.db` (勤怠・給与用)

**1. shifts テーブル** (シフト情報)
| カラム名 | 型 | 説明 |
| :--- | :--- | :--- |
| `id` | INTEGER | プライマリキー (AUTOINCREMENT) |
| `username` | TEXT | ユーザー名 |
| `date` | TEXT | 日付 ("YYYY-MM-DD") |
| `start_h` | TEXT | 開始時 |
| `start_m` | TEXT | 開始分 |
| `end_h` | TEXT | 終了時 |
| `end_m` | TEXT | 終了分 |
| `shift_hour` | REAL | 計算用勤務時間 (小数) |
| **制約** | UNIQUE | (username, date) の組み合わせは一意 |

**2. user_wages テーブル** (時給設定)
| カラム名 | 型 | 説明 |
| :--- | :--- | :--- |
| `username` | TEXT | ユーザー名 (プライマリキー) |
| `salary` | INTEGER | 設定時給額 |

### ② `game.db` (ゲームデータ用)

**1. player_data テーブル** (プレイヤー状況)
| カラム名 | 型 | 説明 |
| :--- | :--- | :--- |
| `id` | INTEGER | プライマリキー (AUTOINCREMENT) |
| `username` | TEXT | ユーザー名 (UNIQUE) |
| `user_token` | INTEGER | 所持トークン数 |
| `stage` | INTEGER | 現在の到達ステージ |
| `stats_json` | TEXT | ステータス情報のJSON文字列 |

**stats_json の構造例:**
```json
{
  "atk": 5,        // 攻撃力
  "atkLevel": 2,   // 攻撃レベル
  "critRate": 0.07,// 会心率
  "critLevel": 2   // 会心レベル
}
```

## 動作に条件と実行方法
```text
> 必要な条件
pip install flask（flaskのインストール）

Python 3.10 以上
　実行手順

python app.py


・pythonライブラリー

Flask==3.0.3
sqlite3
datetime
json
```


## ディレクトリ構成
```text
COLLE_WORK/
├── app.py                
├── routes/               
│   ├── game_manager.py    
│   ├── shift_manager.py   
│   ├── user_manager.py     
│   └── wage_manager.py    
├── static/              
│   ├── game.js            
│   ├── game_style.css    
│   ├── login_style.css    
│   ├── shift_style.css   
│   ├── style.css       
│   ├── top_style.css      
│   └── user_style.css   
└── templates/          
    ├── game.html        
    ├── login.html         
    ├── register.html       
    ├── shift_register.html 
    ├── top.html           
    ├── user_list.html      
    └── wage_register.html  
```